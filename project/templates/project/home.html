{% extends 'project/base.html' %}
{% load static %}

{% block title %}Home - Project eBay{% endblock %}

{% block content %}
    <!-- Add user profile image and link -->
    <div class="user-profile-header">
        {% if user.is_authenticated %}
            <a href="{% url 'user_profile' user.pk %}" class="user-profile-link">
                {% if user.profile.profile_image %}
                    <img src="{{ user.profile.profile_image.url }}" alt="{{ user.username }}" class="user-profile-image">
                {% else %}
                    <img src="{% static 'images/default_profile.jpg' %}" alt="{{ user.username }}" class="user-profile-image">
                {% endif %}
            </a>
            <p>{{ user.username }}</p>
        {% else %}
            <p>Welcome, Guest! <a href="{% url 'login' %}">Log in</a></p>
        {% endif %}
    </div>

    <!-- Listings Section -->
    <h2>All Listings</h2>
    <div class="listing-cards">
        {% for listing in listings %}
            <div class="card">
                <a href="{% url 'listing_detail' listing.pk %}">
                    {% if listing.image %}
                        <img src="{{ listing.image.url }}" alt="{{ listing.name }}" class="listing-image">
                    {% endif %}
                </a>
                <div class="card-details">
                    <h3><a href="{% url 'listing_detail' listing.pk %}">{{ listing.name }}</a></h3>
                    <p>Price: ${{ listing.price }}</p>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}
